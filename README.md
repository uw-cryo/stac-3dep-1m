# stac-3dep-1m
Static STAC Catalog + STAC GeoParquet for 100,000+ 3DEP 1m DEMs from here (https://prd-tnm.s3.amazonaws.com/index.html?prefix=StagedProducts/Elevation/1m)

This repository contains scripts to create a static STAC catalog of 3DEP 1m DEMs hosted on AWS. It creates Static STAC Item JSON generated by a [TiTiler STAC endpoint](https://developmentseed.org/titiler/endpoints/stac/) for each 1m TIFF, and at the end saves a single STAC GeoParquet file with all the Items.


## Catalog visualization

* Browse the static STAC catalog with STAC Browser:

https://radiantearth.github.io/stac-browser/#/external/raw.githubusercontent.com/uw-cryo/stac-3dep-1m/refs/heads/main/catalog/catalog.json

* Render the STAC GeoParquet with STAC-Map:

https://developmentseed.org/stac-map/?href=https://raw.githubusercontent.com/scottyhq/files/refs/heads/main/catalogv2.parquet


## Catalog usage


We created this catalog to test out using GDAL's [GTI driver](https://gdal.org/en/stable/drivers/raster/gti.html), there are some exploratory notebooks using GDAL, Geopandas, and Rustacpy in the `notebooks` folder.

## Catalog creation

Single collection / workunit
```
pixi run create-stac --project  WA_KingCounty_2021_B21 --overwrite
```

Loop over all workunits
```
pixi run create-all
```

Create STAC GeoParquet from static STAC catalog
```
ulimit -n 500000
pixi run catalog-to-geoparquet
```

## References

*  Demo using Satellogic's EarthView dataset containing 7.1 million images: https://github.com/bmcandr/satellogic-earthview-stac-parquet/tree/main

* Blog explaining STAC GeoParquet tooling: https://developmentseed.org/blog/2025-05-07-stac-geoparquet/
